#!/data/data/com.termux/files/usr/bin/zsh
# TODO:
# - youtube string to $var in function echo 
# - start grep url that able to download after question
url=$1
SITE=$(echo $url  | sed 's/^.*\.\(.*\)\..*\/.*/\1/')
SITE=$(echo $SITE | sed 's/http.*\/\([a-zA-Z0-9].*\)\..*/\1/')

my_Choix() {
  echo "What should I do with $url ?"
  echo
  echo
  # echo "cut-server) cut youtube url by server"
  echo "c   : cut youtube url without server"
  echo "d|t : download youtube video to movies-folder"
  echo "u   : download youtube video and convert it to mp3 (music-folder)"

  read CHOICEX
    case $CHOICEX in
     d|t|D|T)
       youtube-dl -o "/storage/emulated/0/Movies/%(title)s.%(ext)s" $url
     ;;
     cut-server)
       echo "start video time mm:ss"
       read STARTVIDEO
       echo "end video time mm:ss"
       read ENDVIDEO
       echo
       export URL=$url
       export STARTVIDEO
       export ENDVIDEO
       source $HOME/scripts/my/server/splitByServer.sh
     ;;
     c)
       echo "start video time mm:ss"
       read STARTVIDEOP
       echo "end video time mm:ss"
       read ENDVIDEOP
       echo
       export URLP=$url
       export STARTVIDEOP
       export ENDVIDEOP
       source $HOME/scripts/my/video/portionFromYoutube.sh
     ;;
     m)
       echo "Artist"
       echo "Title"
       echo "Album"
       read album
       youtube-dl --extract-audio --audio-format mp3 --output "/storage/emulated/0/Music/$artist-$title.%(ext)s" $url
       mid3v2 /storage/emulated/0/Music/$artist-$title.mp3
     ;;
     *)
      clear
      my_Choix
     ;;
  esac
}

case $SITE in
   youtube|youtu|facebook)
       my_Choix
   ;;

   xnxx)
     echo "it's xnxx"
     youtube-dl -o "/storage/emulated/0/Movies/.yyy/%(title)s.%(ext)s" $url
   ;;

   github)
     cd $HOME/
     git clone $url
   ;;

   soundcloud)
     scdl -l $url --path /storage/emulated/0/Music
   ;;

   *)
     cd ~/storage/downloads
     wget $url
   ;;

esac
sleep 3
